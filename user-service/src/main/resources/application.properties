spring.application.name=user-service
# Eureka Configuration (enabled for service discovery)
eureka.client.service-url.defaultZone=http://localhost:8761/eureka/
eureka.client.enabled=true
eureka.client.register-with-eureka=true
eureka.client.fetch-registry=true
server.port=8083

# Management endpoints
management.endpoints.web.exposure.include=health,info,caches
management.endpoint.health.show-details=always

# Disable MySQL and DataSource auto-configuration when using H2
#spring.autoconfigure.exclude=org.springframework.boot.autoconfigure.jdbc.DataSourceAutoConfiguration
#spring.autoconfigure.exclude=org.springframework.boot.autoconfigure.orm.jpa.HibernateJpaAutoConfiguration

# MongoDB Configuration (This has been removed)
# spring.data.mongodb.uri=mongodb://localhost:27017/userdb

# H2 Database Configuration (file-based for persistence)
spring.datasource.url=jdbc:h2:file:./data/userdb
spring.datasource.driver-class-name=org.h2.Driver
spring.datasource.username=sa
spring.datasource.password=password
spring.h2.console.enabled=true
spring.jpa.database-platform=org.hibernate.dialect.H2Dialect
spring.jpa.hibernate.ddl-auto=update
spring.jpa.show-sql=true


# CORS configuration - Disabled (handled by API Gateway)
# spring.web.cors.allowed-origins=http://localhost:3000
# spring.web.cors.allowed-methods=GET,POST,PUT,DELETE
# spring.web.cors.allowed-headers=*

# Enable CORS for frontend (Nginx on port 8084) - Disabled (handled by API Gateway)
# spring.webflux.cors.allowed-origins=http://localhost:8084
# spring.webflux.cors.allowed-methods=GET,POST,PUT,DELETE
# spring.webflux.cors.allowed-headers=*

# Redis Configuration
spring.cache.type=redis
spring.redis.host=localhost
spring.redis.port=6379
# Password not required for local Redis
# spring.redis.password=plm_redis_password
spring.redis.timeout=2000ms
spring.cache.redis.time-to-live=600000

# RabbitMQ Configuration (disabled for standalone setup)
#spring.rabbitmq.host=localhost
#spring.rabbitmq.port=5672
#spring.rabbitmq.username=rabbitmq
#spring.rabbitmq.password=password

# Spring Cloud Compatibility
spring.cloud.compatibility-verifier.enabled=false

# Disable RabbitMQ Auto Configuration
spring.autoconfigure.exclude=org.springframework.boot.autoconfigure.amqp.RabbitAutoConfiguration

# Redis Auto Configuration Enabled

# Feign Configuration for Graph Service
feign.client.config.default.connectTimeout=5000
feign.client.config.default.readTimeout=5000
feign.hystrix.enabled=true

# Graph Service URL (can be overridden by Eureka discovery)
graph.service.url=http://localhost:8090